<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<script type="text/javascript" src="../mwsx.js"></script>
</head>
<body>
	<h1>Search example</h1>
	<p>Write an country name:</p>
	<script type="text/javascript">
		ws_include("search_server.php?mwsd");
		
		var pool = 0; // don't overload the server
		function send_quest()
		{
			if (pool == 2) return;			
			if (pool == 0) {
				document.getElementById('searching').innerHTML = '(searching...)';
				search(
					document.getElementById('txt').value,
					function(r){
						document.getElementById('result').innerHTML = r;
						if (--pool) {
							pool = 0;
							send_quest();
						}
						else {
							document.getElementById('searching').innerHTML = '';
						}
					}
				);
			}
			pool++;
		}
	</script>
	<input type="text" id="txt" onkeydown="send_quest();"/><br />
	<p id="searching"></p>
	Result: <p id='result'></p>
</body>
</html>